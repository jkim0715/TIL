## CAN 통신  Intro

### I. 실습

- 실제 자동차 없이 컴퓨터를 이용해 테스트
- 전송하는 데이터를 CAN버스에 물려있는 모든 ECU가 응답.

### II. 연결

High - High

Low - Low

컴퓨터랑 연결 할 때는, USB로 인식시키고 , CAN장비를 가상의 Serial로 연결할 수 있도로 하는 드라이버 각각 두개 설치. ( USB로 연결되어 있지만 Serial로 인식하도록 만들어 줌)

실제 자동차랑 연결할 땐 USB로 연결하지 않고 Serial로 연결 함.

### III. 설치

1. 드라이버 설치

   1. CAN장비 연결

      ```
      제어판 > 하드웨어 및 소리 > 장치관리자를 확인하면
      기타장치 > CANPro Analyzer가 
      노란색 느낌표가 표시된 상태로 등록된것을 볼 수 있다.
      ```

   2. dp-chooser 실행

      ```
      개발툴용 USB Device Driver를 설치한다. 
         설치가 완료되면 노란색 느낌표가 있던 기타장치는
         사라지고
         장치관리자 > 포트 부분에 CANPro가 등록된걸 
         확인할 수 있다.
      ```

   3. 연결확인 

      ```
      CANPro_v1.4.exe를 실행, 설치하여 analyzer프로그램을
      설치하고 실행시켜 동작을 확인한다.
      ```

      3-1. 여러개 연결

      ```
      CANPro를 하나 더 준비하여 서로 Serial로 연결한 후 각 PC에 연결하면 장치관리자 > 포트 부분에 USB Serial Port가 하나 더 잡히는걸 확인할 수 있다. 이제 analyzer를 2개 실행해서 serial com포트를 각기 다른 port번호로 설정한 후 로 데이터 통신을 할 수 있는지를 확인한다.
      ```

      

2. CAN pro Analyzer 설치

   1. 환경설정.

### IV. CAN protocol

1. 데이터 사이즈 설정

   1. 명령부 데이터부	

      회사들마다 각기 다르게 다 정함.

   2. 명령부

      Hex 코드 (8진수)

      CAN protocol은 데이터 사이즈가 정해져 있기 8진수를 사용해서 더 다양한 종류의 데이터를 주고받을 수 있음.

   3. 데이터부

      

### V. 데이터 송수신

CAN은 송수신 동시에 가능.

1. 수신부 

   수신준비

2. 송신부 

   1. 송신 데이터 설정

ODB

1. 속도, RPM, 온도 등 기본적인 gerneral한 Protocol을 